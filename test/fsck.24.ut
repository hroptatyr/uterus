## -*- shell-script -*-

TOOL=ute
OUTFILE=$(mktemp "/tmp/tmp.XXXXXXXX")
COMMENT="testing decompression/compression"
CMDFILE=$(mktemp "/tmp/tmp.XXXXXXXX")

endian()
{
	ind=$(echo -n I | od -to2 | head -n1 | cut -f2 -d" " | cut -c6)
	if test "${ind}" = "0"; then
		echo "big"
	elif test "${ind}" = "1"; then
		echo "little"
	else
		echo "unknown"
	fi
}

if test "$(endian)" = "big"; then
	INFILE="${srcdir}/fsck.17.ref.beute"
	REFFILE="${srcdir}/fsck.17.ref.beute"
else
	INFILE="${srcdir}/fsck.17.ref.leute"
	REFFILE="${srcdir}/fsck.17.ref.leute"
fi

cat <<EOF > "${CMDFILE}"
cp -a '${INFILE}' '${OUTFILE}'
"\${TOOL}" fsck --decompress '${OUTFILE}'
"\${TOOL}" fsck --compress '${OUTFILE}'
EOF

## fsck.24.ut ends here
