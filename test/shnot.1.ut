## -*- shell-script -*-

TOOL=ute
INFILE="${srcdir}/print.c.ute"
OUTFILE="testload.ute"
CMDFILE=$(mktemp "/tmp/tmp.XXXXXXXX")

endian()
{
	ind=$(echo -n I | od -to2 | head -n1 | cut -f2 -d" " | cut -c6)
	if test "${ind}" = "0"; then
		echo "big"
	elif test "${ind}" = "1"; then
		echo "little"
	else
		echo "unknown"
	fi
}

cat <<EOF > "${CMDFILE}"
TMPIN='${INFILE}'
TMPOUT='${OUTFILE}'
if test "$(endian)" = "big"; then
	TMPIN=\$(mktemp "/tmp/tmp.XXXXXXXX")
	TMPOUT=\$(mktemp "/tmp/tmp.XXXXXXXX")
	"\${TOOL}" fsck --big-endian '${INFILE}' -o "\${TMPIN}"
fi
"\${TOOL}" shnot -i 60 -o "\${TMPOUT}" "\${TMPIN}"
if test "$(endian)" = "big"; then
	"\${TOOL}" fsck --little-endian "\${TMPOUT}" -o '${OUTFILE}'
	rm -f -- "\${TMPIN}" "\${TMPOUT}"
fi
EOF

## STDIN
 
## STDOUT
OUTFILE_SHA1="d7d194727109066fb4982c37f9c59c6c319470c3"
## was 96906caa8ec3ceb88d700f130c4f24fb80a5ff16 before ssnp got introduced

REFFILE="shnot.1.ref.ute"

## shnot.1.ut ends here
