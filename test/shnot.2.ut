## -*- shell-script -*-

TOOL=ute
INFILE="${srcdir}/print.d.ute"
OUTFILE="testload.ute"
CMDFILE=$(mktemp "/tmp/tmp.XXXXXXXX")

endian()
{
	ind=$(echo -n I | od -to2 | head -n1 | cut -f2 -d" " | cut -c6)
	if test "${ind}" = "0"; then
		echo "big"
	elif test "${ind}" = "1"; then
		echo "little"
	else
		echo "unknown"
	fi
}

cat <<EOF > "${CMDFILE}"
TMPIN='${INFILE}'
TMPOUT='${OUTFILE}'
if test "$(endian)" = "big"; then
	TMPIN=\$(mktemp "/tmp/tmp.XXXXXXXX")
	TMPOUT=\$(mktemp "/tmp/tmp.XXXXXXXX")
	"\${TOOL}" fsck --big-endian '${INFILE}' -o "\${TMPIN}"
fi
"\${TOOL}" shnot -i 1 -o "\${TMPOUT}" "\${TMPIN}"
if test "$(endian)" = "big"; then
	"\${TOOL}" fsck --little-endian "\${TMPOUT}" -o '${OUTFILE}'
	rm -f -- "\${TMPIN}" "\${TMPOUT}"
fi
EOF

## STDIN
 
## STDOUT
OUTFILE_SHA1="3ce22976091112cdd7456ac43a35a6a37d3c9172"
## was 304535076361eecdef076e0f3e1d0d331a85e6fe before ssnp got introduced

REFFILE="shnot.2.ref.ute"

## shnot.2.ut ends here
